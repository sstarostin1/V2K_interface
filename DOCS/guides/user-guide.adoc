= Руководство пользователя

// Метаданные для машинной читаемости
:component: user-guide
:tags: [руководство, пользователь, запуск, использование]
:dependencies: [VCAS Server Viewer]
:related: [guides/installation.adoc, guides/troubleshooting.adoc]

== Запуск приложения

=== С реальным сервером
[source,bash]
----
python main.py
----

Приложение подключится к реальному VCAS серверу по адресу из config.py (172.16.1.110:20041).

=== С mock сервером
[source,bash]
----
python main.py --mock-server
----

Или:
[source,bash]
----
export VCAS_MOCK_MODE=1
python main.py
----

Приложение подключится к mock серверу (127.0.0.1:20042).

=== Запуск mock сервера отдельно
[source,bash]
----
python run_mock_server.py --host 127.0.0.1 --port 20042 --debug
----

== Интерфейс пользователя

=== Главное окно
* **Заголовок**: VCAS Server Viewer
* **Размер**: 1000x700 пикселей
* **Стиль**: Fusion (нативный для системы)

=== Левая панель: Дерево каналов
* Отображает каналы в иерархической структуре
* Директории жирным шрифтом, каналы обычным
* Клик по каналу показывает информацию в правой панели

=== Правая панель: Информация о канале
* **Основная информация**: Тип, единицы, значение
* **Описание**: Подробное описание канала

=== Статус-бар
* **Режим**: Тестовый или Реальный сервер
* **Подключение**: Подключено/Отключено
* **Каналы**: Количество загруженных каналов

=== Меню
* **Файл**: Подключиться, Отключиться, Выход
* **Вид**: Создать окно графиков
* **Сервис**: Обновить каналы, Очистить кэш, Принудительное обновление
* **Справка**: О программе

=== Панель инструментов
* Кнопки: Подключиться, Отключиться, Обновить, Графики

== Работа с приложением

=== Подключение к серверу
1. Запустите приложение
2. В меню Файл выберите "Подключиться" или нажмите кнопку на панели
3. Дождитесь подключения (статус в статус-баре)
4. Дерево каналов заполнится автоматически

=== Просмотр каналов
1. В левой панели разверните директории
2. Кликните по каналу для просмотра информации
3. Информация обновится в правой панели

=== Работа с графиками

==== Создание окна графиков
1. Выберите один или несколько каналов в дереве
2. Нажмите Enter или выберите "Вид → Создать окно графиков"
3. Откроется новое окно с графиками выбранных каналов

==== Панель управления графиком
* **Расположение**: В нижней части каждого окна графиков
* **Элементы управления**:
  - **Метка "Окно времени (мин:)"**: Указывает назначение поля
  - **Поле ввода**: Позволяет установить окно времени отображения данных (в минутах)
  - **Шаг изменения**: 1 минута
  - **Диапазон**: От 1 до 1440 минут (24 часа)
* **Видимость**: Панель отображается по умолчанию, можно скрыть через контекстное меню

==== Управление окном времени
* Введите желаемое значение в минутах в поле ввода
* Нажмите Enter для применения изменений
* Изменения затрагивают только текущее окно графиков
* Значение по умолчанию: 5 минут

==== Контекстное меню графиков
* **Добавить график**: Создает дополнительный график в окне
* **Удалить график**: Удаляет последний график (если их больше одного)
* **Ориентация**: Изменяет расположение графиков (вертикально/горизонтально)
* **Показать/скрыть панель управления**: Переключает видимость панели управления
* **Очистить все**: Удаляет все каналы из окна

==== Управление окнами графиков

===== Переключение в режим управления
1. Нажмите кнопку "Графики" на панели инструментов
2. Правая панель переключится в режим управления окнами графиков
3. Повторное нажатие вернет обычный режим просмотра

===== Панель управления окнами
* **Расположение**: Правая панель главного окна
* **Элементы управления**:
  - **Список окон**: Показывает все открытые окна графиков
  - **Информация об окне**: Название, количество каналов, окно времени
  - **Кнопки управления**: Переименовать (✏), Закрыть (✕) для каждого окна
  - **Создать новое окно**: Кнопка для добавления нового окна графиков

===== Действия с окнами
* **Переименование**: Клик по ✏ открывает диалог ввода нового названия
* **Закрытие**: Клик по ✕ закрывает окно с подтверждением
* **Создание**: Кнопка "Создать новое окно" добавляет пустое окно графиков

==== Drag-and-drop каналов
* Перетащите канал из дерева на график для добавления
* Перетащите канал между графиками для перемещения
* Перетащите канал за пределы графика для удаления

=== Обновление данных
* **Автоматически**: Каждые 30 секунд
* **Вручную**: Сервис → Обновить каналы
* **Принудительно**: Сервис → Принудительное обновление (с очисткой кэша)

=== Отключение
* В меню Файл выберите "Отключиться"
* Или закройте приложение (автоматически отключится)

== Режимы работы

=== Реальный сервер
* Подключение к ВЭПП-2000 серверу
* Требует доступа к сети ВЭПП-2000
* Показывает реальные данные каналов

=== Mock сервер
* Тестовый режим для разработки
* Генерирует фиктивные данные
* Не требует подключения к реальной системе
* Идеально для отладки и тестирования

== Логирование

* Логи записываются в `vcas_viewer.log`
* Уровень: INFO по умолчанию, DEBUG с `--debug`
* Включают подключения, ошибки, обновления

== Параметры командной строки

* `--mock-server`: Использовать mock сервер
* `--debug`: Включить отладочное логирование

== Примеры

=== Пример 1: Запуск с mock
[source,bash]
----
python main.py --mock-server
----

=== Пример 2: Запуск с debug
[source,bash]
----
python main.py --mock-server --debug
----

=== Пример 3: Только mock сервер
[source,bash]
----
python run_mock_server.py --port 20042
python main.py --mock-server
----

Связанные документы:

* xref:guides/installation.adoc[Установка и настройка] - подготовка к запуску
* xref:guides/troubleshooting.adoc[Решение проблем] - устранение неисправностей
* xref:overview.adoc[Общее описание] - назначение и возможности
